<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆ‘çš„ç½‘ç«™</title>
  <meta name="description" content="ä¸€ä¸ªç®€æ´ã€å“åº”å¼ã€å¯å¿«é€Ÿä¸Šæ‰‹çš„ä¸ªäººç½‘ç«™æ¨¡æ¿ã€‚" />
  <!-- å¯é€‰ï¼šç«™ç‚¹å›¾æ ‡ä¸ç¤¾äº¤åˆ†äº«
  <link rel="icon" href="/favicon.ico" />
  <meta property="og:title" content="æˆ‘çš„ç½‘ç«™" />
  <meta property="og:description" content="ä¸€ä¸ªç®€æ´ã€å“åº”å¼ã€å¯å¿«é€Ÿä¸Šæ‰‹çš„ä¸ªäººç½‘ç«™æ¨¡æ¿ã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.com" />
  <meta property="og:image" content="https://example.com/cover.jpg" />
  -->
  <style>
    /* â€”â€” åŸºç¡€æ ·å¼ï¼šæ”¯æŒæµ…/æ·±è‰²ï¼Œç§»åŠ¨ä¼˜å…ˆ â€”â€” */
    :root {
      --bg: #0b0b0c;         /* æ·±è‰²èƒŒæ™¯ */
      --fg: #eaeaea;         /* æ·±è‰²å‰æ™¯ */
      --muted: #a0a0a0;
      --brand: #5b9bff;      /* å“ç‰Œè‰²ï¼ˆä¼šè¢«å„æˆ¿é—´ä¸»é¢˜è¦†ç›–ï¼‰ */
      --card: #151518;
      --border: #252528;
      --focus: #7aa2ff;
    }
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #ffffff;
        --fg: #111111;
        --muted: #555555;
        --brand: #0b57d0;
        --card: #f6f7f9;
        --border: #e5e7eb;
        --focus: #0b57d0;
      }
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background: var(--bg);
      color: var(--fg);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    a { color: var(--brand); text-decoration: none; }
    a:hover { text-decoration: underline; }
    a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 2px;
      border-radius: 10px;
    }
    .muted { color: var(--muted); }
    .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }

    /* â€”â€” é¡¶éƒ¨å¯¼èˆª â€”â€” */
    header { position: sticky; top: 0; z-index: 10; backdrop-filter: blur(8px); background: color-mix(in oklab, var(--bg) 85%, transparent); border-bottom: 1px solid var(--border); }
    .nav { display: flex; align-items: center; justify-content: space-between; height: 64px; }
    .brand { display: inline-flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .3px; }
    .brand .dot { width: 12px; height: 12px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #fff8, var(--brand)); box-shadow: 0 0 16px var(--brand); }
    nav ul { list-style: none; display: flex; gap: 18px; padding: 0; margin: 0; }
    nav a { padding: 8px 10px; border-radius: 10px; }
    nav a.active, nav a:hover { background: var(--card); }
    .menu { display: none; }
    @media (max-width: 780px) {
      nav ul { display: none; }
      nav ul.open { display: flex; flex-direction: column; gap: 10px; padding: 12px 0 16px; }
      .menu { display: inline-flex; align-items: center; gap: 8px; border: 1px solid var(--border); padding: 6px 10px; border-radius: 10px; background: var(--card); cursor: pointer; }
    }

    /* â€”â€” Hero â€”â€” */
    .hero { padding: 80px 0 40px; text-align: center; }
    .hero h1 { font-size: clamp(28px, 6vw, 48px); line-height: 1.2; margin: 0 0 12px; }
    .hero p { margin: 0 auto; max-width: 720px; color: var(--muted); }
    .actions { margin-top: 22px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; border: 1px solid var(--border); border-radius: 12px; background: var(--card); color: var(--fg); cursor: pointer; }
    .btn.primary { background: linear-gradient(135deg, var(--brand), color-mix(in oklab, var(--brand), #fff 20%)); border-color: transparent; box-shadow: 0 6px 22px color-mix(in oklab, var(--brand), #000 70%); }

    /* â€”â€” Features â€”â€” */
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 40px 0; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; }
    .card h3 { margin: 0 0 6px; font-size: 18px; }
    .card p { margin: 0; color: var(--muted); }
    @media (max-width: 900px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }

    /* â€”â€” About & Contact â€”â€” */
    section { padding: 40px 0; }
    .two { display: grid; grid-template-columns: 1.2fr .8fr; gap: 24px; }
    @media (max-width: 900px) { .two { grid-template-columns: 1fr; } }
    form { display: grid; gap: 12px; }
    input, textarea { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--bg); color: var(--fg); }
    textarea { min-height: 120px; resize: vertical; }

    /* â€”â€” é¡µè„š â€”â€” */
    footer { border-top: 1px solid var(--border); padding: 28px 0 60px; color: var(--muted); }

    /* â€”â€” è§†å›¾å®¹å™¨ä¸å®«æ ¼ â€”â€” */
    .views section[role="view"] { display: none; }
    .views section[role="view"].active { display: block; }
    body.view-mode main > :not(.views) { display: none; }

    .icon-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 14px; margin-top: 14px; }
    @media (max-width: 640px) { .icon-grid { grid-template-columns: 1fr 1fr; } }
    .icon-card { display: flex; align-items: center; gap: 12px; padding: 14px; border: 1px solid var(--border); border-radius: 16px; background: var(--card); transition: transform .15s ease; }
    .icon-card:hover { transform: translateY(-2px); }
    .icon { width: 44px; height: 44px; border-radius: 50%; display: inline-grid; place-items: center; font-size: 22px; background: color-mix(in oklab, var(--brand), #000 60%); }
    .icon + .label { font-weight: 700; }

    .room { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; margin: 16px 0; }
    .room h3 { margin: 0 0 8px; }
    .room p { margin: 0; color: var(--muted); }

    /* â€”â€” UGC ä¸Šä¼  & ç”»å»Š â€”â€” */
    .upload { display: grid; gap: 10px; margin: 14px 0 8px; }
    .upload .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 600px) { .upload .row { grid-template-columns: 1fr; } }
    .gallery { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; }
    @media (max-width: 900px) { .gallery { grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (max-width: 560px) { .gallery { grid-template-columns: 1fr; } }
    .tile { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; display: flex; flex-direction: column; }
    .tile img { width: 100%; height: 220px; object-fit: cover; display: block; }
    .tile .meta { padding: 10px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .votes { font-weight: 700; }
    .vote-btn { border: 1px solid var(--border); background: var(--bg); padding: 6px 10px; border-radius: 10px; cursor: pointer; }
    .vote-btn[disabled] { opacity: .6; cursor: not-allowed; }

    /* â€”â€” ä¸»é¢˜è‰²é¢„è®¾ï¼ˆå¯æŒ‰å–œå¥½æ›¿æ¢ï¼‰ â€”â€” */
    .theme-genshin { --brand: #5b9bff; }
    .theme-starrail { --brand: #9e7bff; }
    .theme-bluearchive { --brand: #66d1ff; }
    .theme-huayishan { --brand: #f2a8c6; }

    /* â€”â€” æ’è¡Œæ¦œï¼ˆTop3 æ–¹å½¢ï¼‰ â€”â€” */
    .lb-grid { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; }
    @media (max-width: 780px) { .lb-grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 560px) { .lb-grid { grid-template-columns: 1fr 1fr 1fr; } }
    .lb-item { position: relative; border: 1px solid var(--border); border-radius: 14px; overflow: hidden; background: var(--card); }
    .lb-item .imgwrap { aspect-ratio: 1 / 1; background: #0003; }
    .lb-item img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .lb-item .badge { position: absolute; top: 8px; left: 8px; padding: 4px 10px; border-radius: 999px; border: 1px solid var(--border); background: var(--card); font-weight: 800; }
    .lb-item .meta { padding: 8px 10px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }

    /* â€”â€” æ¸©é¦¨æˆ¿é—´èƒŒæ™¯ â€”â€” */
    .room.cozy { 
      background: 
        radial-gradient(1200px 600px at -10% -20%, #ffffff10, transparent 60%),
        radial-gradient(1200px 600px at 110% 120%, #ffffff08, transparent 60%),
        linear-gradient(180deg, color-mix(in oklab, var(--card), #fff 3%), var(--card));
      box-shadow: inset 0 1px 0 #fff1; 
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="dot"></span> æˆ‘çš„ç«™ç‚¹</div>
      <nav>
        <button class="menu" id="menuBtn" aria-label="æ‰“å¼€èœå•">èœå• â–¾</button>
        <ul id="navLinks">
          <li><a href="#home" class="active">é¦–é¡µ</a></li>
          <li><a href="#features">ç‰¹ç‚¹</a></li>
          <li><a href="#games" data-view>æ¸¸æˆ</a></li>
          <li><a href="#manga" data-view>æ¼«ç”»</a></li>
          <li><a href="#about">å…³äº</a></li>
          <li><a href="#contact">è”ç³»</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="home" class="container">
    <section class="hero">
      <h1>ä½ å¥½ï¼Œä¸–ç•Œï¼ğŸš€</h1>
      <p>è¿™æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ç½‘é¡µæ¨¡æ¿ï¼šè¯­ä¹‰åŒ– HTMLã€å“åº”å¼å¸ƒå±€ã€æµ…/æ·±è‰²é€‚é…ã€æ— éœ€å¤–éƒ¨æ¡†æ¶ã€‚é€‚åˆåšä¸ªäººä¸»é¡µã€ä½œå“é›†æˆ–æ´»åŠ¨è½åœ°é¡µã€‚</p>
      <div class="actions">
        <a class="btn primary" href="#features">æŸ¥çœ‹ç‰¹ç‚¹</a>
        <a class="btn" href="#games" data-view>ğŸ® æ¸¸æˆ</a>
        <a class="btn" href="#manga" data-view>ğŸ“š æ¼«ç”»</a>
        <a class="btn" href="#about">äº†è§£æˆ‘</a>
        <a class="btn" href="#contact">è”ç³»</a>
      </div>
    </section>

    <!-- é¦–é¡µï¼šæ’è¡Œæ¦œï¼ˆTop3ï¼‰ -->
    <section id="leaderboard-home">
      <h2>ä»Šæ—¥æ’è¡Œæ¦œ ğŸ†</h2>
      <div id="top-tile"></div>
      <p class="muted">æ¯ä½ç”¨æˆ·æ¯å¤©æœ‰ 5 ç¥¨ï¼Œä¸”éœ€æŠ•ç»™ä¸åŒçš„ä½œå“ã€‚</p>
    </section>

    <section id="features">
      <h2>ç‰¹ç‚¹</h2>
      <div class="grid">
        <article class="card">
          <h3>å“åº”å¼è®¾è®¡</h3>
          <p>è‡ªåŠ¨é€‚é…æ‰‹æœºã€å¹³æ¿ä¸ç”µè„‘ç«¯ã€‚</p>
        </article>
        <article class="card">
          <h3>æµ…/æ·±è‰²</h3>
          <p>è·Ÿéšç³»ç»Ÿä¸»é¢˜ï¼Œè§†è§‰èˆ’é€‚ã€‚</p>
        </article>
        <article class="card">
          <h3>æ˜“äºæ‰©å±•</h3>
          <p>çº¯ HTML/CSS/JSï¼Œç»“æ„æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤ã€‚</p>
        </article>
        <article class="card">
          <h3>è¯­ä¹‰åŒ–</h3>
          <p>header/main/section/footer æå‡å¯è®¿é—®æ€§ä¸ SEOã€‚</p>
        </article>
        <article class="card">
          <h3>è½»é‡</h3>
          <p>é›¶ä¾èµ–å³å¯ä¸Šçº¿ï¼ŒåŠ è½½è¿…é€Ÿã€‚</p>
        </article>
        <article class="card">
          <h3>æ¨¡æ¿å‹å¥½</h3>
          <p>æ›¿æ¢æ–‡æ¡ˆä¸æ ·å¼å³å¯å®Œæˆä¸ªæ€§åŒ–ã€‚</p>
        </article>
      </div>
    </section>

    <section id="about" class="two">
      <div>
        <h2>å…³äºæˆ‘</h2>
        <p>å†™ä¸€ç‚¹è‡ªæˆ‘ä»‹ç»ï¼šä½ æ˜¯è°ã€å–œæ¬¢åšä»€ä¹ˆã€æœ‰ä»€ä¹ˆä½œå“æˆ–è®¡åˆ’ã€‚å¯ä»¥æ”¾ä¸Šç¤¾äº¤è´¦å·æˆ–ç®€å†é“¾æ¥ã€‚</p>
        <ul>
          <li>ğŸ”­ æ­£åœ¨åšï¼šâ€¦â€¦</li>
          <li>ğŸŒ± å­¦ä¹ ä¸­ï¼šâ€¦â€¦</li>
          <li>ğŸ“« è”ç³»æˆ‘ï¼šyou@example.com</li>
        </ul>
      </div>
      <aside class="card">
        <h3>æœ€æ–°åŠ¨æ€</h3>
        <p>è¿™é‡Œå¯ä»¥æ”¾è¿‘æœŸæ›´æ–°ã€æ´»åŠ¨æˆ–å…¬å‘Šã€‚</p>
      </aside>
    </section>

    <section id="contact" class="two">
      <div>
        <h2>è”ç³»æˆ‘</h2>
        <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹è¡¨å•ï¼ˆå‰ç«¯æ ¡éªŒ+æ§åˆ¶å°è¾“å‡ºï¼‰ã€‚ä¸Šçº¿åå¯ä»¥æ¥ç¬¬ä¸‰æ–¹è¡¨å•æœåŠ¡æˆ–è‡ªå»ºåç«¯ã€‚</p>
        <form id="contactForm">
          <label>
            å§“å
            <input name="name" placeholder="ä½ çš„åå­—" required />
          </label>
          <label>
            é‚®ç®±
            <input name="email" type="email" placeholder="you@example.com" required />
          </label>
          <label>
            ç•™è¨€
            <textarea name="message" placeholder="æƒ³å¯¹æˆ‘è¯´çš„è¯"></textarea>
          </label>
          <button class="btn primary" type="submit">å‘é€</button>
        </form>
      </div>
      <div class="card">
        <h3>å¸¸è§é—®ç­”</h3>
        <p><strong>Q:</strong> æˆ‘å¯ä»¥æŠŠè¿™ä¸ªæ¨¡æ¿å•†ç”¨å—ï¼Ÿ<br />
           <strong>A:</strong> å¯ä»¥ï¼Œæœ¬æ¨¡æ¿æ— ç‰ˆæƒé™åˆ¶ï¼Œéšæ„ä¿®æ”¹ä¸å‘å¸ƒã€‚</p>
      </div>
    </section>

    <!-- â€”â€” è‡ªå®šä¹‰è§†å›¾ â€”â€” -->
    <section class="views">
      <!-- æ¸¸æˆç›®å½• -->
      <section id="games" role="view">
        <h2>æ¸¸æˆ</h2>
        <p>é€‰æ‹©ä¸€ä¸ªä¸–ç•Œï¼Œè¿›å…¥å¯¹åº”çš„â€œæˆ¿é—´â€ã€‚</p>
        <div class="icon-grid">
          <a class="icon-card" href="#room-genshin" data-view>
            <span class="icon">âœ¦</span>
            <span class="label">åŸç¥</span>
          </a>
          <a class="icon-card" href="#room-starrail" data-view>
            <span class="icon">ğŸš†</span>
            <span class="label">å´©åï¼šæ˜Ÿç©¹é“é“</span>
          </a>
          <a class="icon-card" href="#room-bluearchive" data-view>
            <span class="icon">ğŸ“˜</span>
            <span class="label">è”šè“æ¡£æ¡ˆ</span>
          </a>
          <a class="icon-card" href="#room-huayishan" data-view>
            <span class="icon">ğŸ‹</span>
            <span class="label">èŠ±äº¦å±±å¿ƒä¹‹æœˆ</span>
          </a>
          <a class="icon-card" href="#room-onmyoji" data-view>
            <span class="icon">ğŸª„</span>
            <span class="label">é˜´é˜³å¸ˆ</span>
          </a>
          <a class="icon-card" href="#room-honor" data-view>
            <span class="icon">ğŸ›¡ï¸</span>
            <span class="label">ç‹è€…è£è€€</span>
          </a>
          <a class="icon-card" href="#room-afk" data-view>
            <span class="icon">âš”ï¸</span>
            <span class="label">å‰‘ä¸è¿œå¾</span>
          </a>
        </div>
      </section>

      <!-- æ¼«ç”»ç›®å½•ï¼ˆå…ˆåšå ä½ï¼‰ -->
      <section id="manga" role="view">
        <h2>æ¼«ç”»</h2>
        <p>æŠŠä½ å–œæ¬¢çš„æ¼«ç”»ç³»åˆ—å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šä¸ºæ¯ä¸ªç³»åˆ—å¼€ä¸€é—´æˆ¿é—´ã€‚</p>
      </section>

      <!-- â€”â€” å„æ¸¸æˆé£æ ¼æˆ¿é—´ â€”â€” -->
      <section id="room-genshin" role="view" class="theme-genshin">
        <h2>åŸç¥ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>æç“¦ç‰¹è§’è½</h3>
          <p>åœ¨è¿™é‡Œæ”¾ä½ çš„è§’è‰²å¡ã€Cos ç…§ã€æ”»ç•¥å¿ƒå¾—ã€æœ€çˆ±çš„é…é˜Ÿã€æŠ½å¡çºªå¿µç­‰ã€‚</p>
          <form class="upload" data-room="genshin">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-genshin" class="gallery"></div>
        </div>
      </section>

      <section id="room-starrail" role="view" class="theme-starrail">
        <h2>å´©åï¼šæ˜Ÿç©¹é“é“ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>å¼€æ‹“è€…çš„é©¿ç«™</h3>
          <p>è®°å½•å¼€æ‹“æ—¥è®°ã€è§’è‰²é¢æ¿ã€å…‰é”¥æ”¶è—ã€æŠ½å¡æ—¶åˆ»ä¸è½¦ç«™æ‘„å½±ã€‚</p>
          <form class="upload" data-room="starrail">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-starrail" class="gallery"></div>
        </div>
      </section>

      <section id="room-bluearchive" role="view" class="theme-bluearchive">
        <h2>è”šè“æ¡£æ¡ˆ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>è”é‚¦å­¦ç”Ÿä¼šèµ„æ–™æŸœ</h3>
          <p>æ”¶å½•æœ€çˆ±çš„å­¦ç”Ÿã€æ´»åŠ¨ bannerã€ä½œä¸šï¼ˆå›¾é›†ï¼‰ã€è€å¸ˆçš„æ—¥å¸¸ç­‰ã€‚</p>
          <form class="upload" data-room="bluearchive">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-bluearchive" class="gallery"></div>
        </div>
      </section>

      <section id="room-huayishan" role="view" class="theme-huayishan">
        <h2>èŠ±äº¦å±±å¿ƒä¹‹æœˆ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>å›½é£é›…è‹‘</h3>
          <p>å…¸ç±ã€æ›²è°±ã€åæœå›¾å½•ã€è§’è‰²æ‰‹è´¦ä¸æ‹ç…§çµæ„Ÿå¢™ã€‚</p>
          <form class="upload" data-room="huayishan">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-huayishan" class="gallery"></div>
        </div>
      </section>

      <!-- æ–°å¢ï¼šé˜´é˜³å¸ˆ / ç‹è€…è£è€€ / å‰‘ä¸è¿œå¾ æˆ¿é—´ -->
      <section id="room-onmyoji" role="view" class="theme-huayishan">
        <h2>é˜´é˜³å¸ˆ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>å¹³å®‰äº¬ç»˜å·</h3>
          <p>å¼ç¥å›¾é‰´ã€å¾¡é­‚æ­é…ã€æ–—æŠ€å¿ƒå¾—ã€å¬å”¤çºªå¿µä¸åŒäººå›¾é›†ã€‚</p>
          <form class="upload" data-room="onmyoji">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-onmyoji" class="gallery"></div>
        </div>
      </section>

      <section id="room-honor" role="view" class="theme-starrail">
        <h2>ç‹è€…è£è€€ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>å³¡è°·æˆ˜æŠ¥</h3>
          <p>è‹±é›„ä¸çš®è‚¤æ”¶è—ã€ç²¾å½©å‡»æ€é›†é”¦ã€æˆ˜ç»©é‡Œç¨‹ç¢‘ä¸é˜µå®¹æ­é…æ€è·¯ã€‚</p>
          <form class="upload" data-room="honor">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-honor" class="gallery"></div>
        </div>
      </section>

      <section id="room-afk" role="view" class="theme-bluearchive">
        <h2>å‰‘ä¸è¿œå¾ Â· æˆ¿é—´</h2>
        <div class="room cozy">
          <h3>æ˜†é›…ä¸–ç•Œä¹¦æˆ¿</h3>
          <p>æŒ‚æœºæ—¥å¸¸ã€é˜µå®¹æ€è·¯ã€æŠ½å¡ä¸å®¶å…·çºªå¿µã€å¥‡å¢ƒæ¼«æ¸¸å¿ƒå¾—ã€‚</p>
          <form class="upload" data-room="afk">
            <div class="row">
              <input name="title" placeholder="ä½œå“æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰" />
              <input name="author" placeholder="ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰" />
            </div>
            <input type="file" name="image" accept="image/*" required />
            <button class="btn primary" type="submit">ä¸Šä¼ å›¾ç‰‡</button>
            <small class="muted">ä»…ç¤ºä¾‹ï¼šæ–‡ä»¶å°†ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚</small>
          </form>
          <div id="gallery-afk" class="gallery"></div>
        </div>
      </section>
    </section>

  </main>

  <footer>
    <div class="container">
      Â© <span id="year"></span> ä½ çš„åå­— Â· ä¿ç•™æ‰€æœ‰æƒåˆ©
    </div>
  </footer>

  <script>
    // â€”â€” å¯¼èˆªï¼šç§»åŠ¨ç«¯èœå•å¼€å…³ â€”â€”
    const menuBtn = document.getElementById('menuBtn');
    const navLinks = document.getElementById('navLinks');
    menuBtn?.addEventListener('click', () => navLinks.classList.toggle('open'));

    // â€”â€” å¹´ä»½è‡ªåŠ¨æ›´æ–° â€”â€”
    document.getElementById('year').textContent = new Date().getFullYear();

    // â€”â€” è½»é‡çº§â€œè·¯ç”±â€ï¼šæ ¹æ® hash æ˜¾ç¤ºè§†å›¾ â€”â€”
    const views = Array.from(document.querySelectorAll('section[role="view"]'));

    function showView(id) {
      // è¯†åˆ«æ˜¯å¦è¿›å…¥è§†å›¾æ¨¡å¼ï¼ˆgames / manga / room-*ï¼‰
      const validIds = new Set(views.map(v => `#${v.id}`));
      const isView = validIds.has(id);

      // åˆ‡æ¢ä¸»ç•Œé¢å¯è§æ€§
      document.body.classList.toggle('view-mode', isView);

      // åˆ‡æ¢å„è§†å›¾æ˜¾ç¤º
      views.forEach(v => v.classList.toggle('active', `#${v.id}` === id));

      // é«˜äº®å¯¼èˆªï¼ˆä»…å¯¹ data-view é“¾æ¥ï¼‰
      document.querySelectorAll('a[data-view]').forEach(a => {
        a.classList.toggle('active', a.getAttribute('href') === id);
      });

      // è§†å›¾æ¨¡å¼ä¸‹æ»šåŠ¨åˆ°é¡¶éƒ¨
      if (isView) window.scrollTo({ top: 0, behavior: 'smooth' });

      // å…³é—­ç§»åŠ¨ç«¯èœå•
      navLinks?.classList.remove('open');
    }

    window.addEventListener('hashchange', () => showView(location.hash));
    // åˆæ¬¡åŠ è½½
    showView(location.hash);

    // è®©å¸¦ data-view çš„é“¾æ¥åªåˆ‡æ¢è§†å›¾ï¼Œä¸è§¦å‘é»˜è®¤è·³è½¬
    document.querySelectorAll('a[data-view]').forEach(a => {
      a.addEventListener('click', (e) => {
        const href = a.getAttribute('href');
        if (href && href.startsWith('#')) {
          e.preventDefault();
          if (location.hash !== href) location.hash = href; else showView(href);
        }
      });
    });

    // â€”â€” è¡¨å•ï¼šé˜»æ­¢é»˜è®¤æäº¤ï¼Œæ‰“å°æ•°æ® â€”â€”
    document.getElementById('contactForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      console.log('è¡¨å•æ•°æ®ï¼š', data);
      alert('å·²æ”¶åˆ°ï¼(ç¤ºä¾‹)\næ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æ•°æ®');
      e.target.reset();
    });

    // â€”â€” æœ€å°åŒ–æµ‹è¯•ï¼ˆä»…åœ¨ ?test=1 æ—¶è¿è¡Œï¼‰ â€”â€”
    (function runTestsIfRequested(){
      const params = new URLSearchParams(location.search);
      if (params.get('test') !== '1') return;

      const wait = (ms=20) => new Promise(r => setTimeout(r, ms));
      const get = (sel) => document.querySelector(sel);

      (async () => {
        try {
          const original = location.hash;

          console.log('\nğŸ§ª è¿è¡Œå†…ç½®æµ‹è¯•...');

          // T1: åˆ‡åˆ°æ¸¸æˆç›®å½•
          location.hash = '#games';
          await wait();
          console.assert(document.body.classList.contains('view-mode'), 'T1: è¿›å…¥è§†å›¾æ¨¡å¼');
          console.assert(get('#games[role="view"]').classList.contains('active'), 'T1: #games è§†å›¾æ¿€æ´»');

          // T2: åˆ‡åˆ°åŸç¥æˆ¿é—´
          location.hash = '#room-genshin';
          await wait();
          console.assert(get('#room-genshin').classList.contains('active'), 'T2: åŸç¥æˆ¿é—´æ¿€æ´»');

          // T3: è¿”å›ä¸»ç•Œé¢
          location.hash = '';
          showView('');
          await wait();
          console.assert(!document.body.classList.contains('view-mode'), 'T3: é€€å‡ºè§†å›¾æ¨¡å¼');

          // è¿˜åŸå“ˆå¸Œ
          location.hash = original;
          console.log('âœ… è·¯ç”±æµ‹è¯•é€šè¿‡ï¼ˆå¦‚éœ€å†æ¬¡è¿è¡Œï¼ŒåŠ ä¸Š ?test=1ï¼‰');
        } catch (err) {
          console.error('âŒ è·¯ç”±æµ‹è¯•å¤±è´¥ï¼š', err);
        }
      })();
    })();

    // â€”â€” UGC æœ¬åœ°å­˜å‚¨å®ç°ï¼ˆæ¼”ç¤ºç”¨é€”ï¼‰ â€”â€”
    const STORE_KEY = 'ugcImagesV1';
    const MAX_IMAGE_SIZE = 3 * 1024 * 1024; // 3MB ä»¥å†…

    /** @typedef {{id:string, room:string, title?:string, author?:string, dataUrl:string, votes:number, createdAt:number}} UGC */

    const loadImages = () => {
      try { return JSON.parse(localStorage.getItem(STORE_KEY) || '[]'); } catch { return []; }
    };
    const saveImages = (arr) => localStorage.setItem(STORE_KEY, JSON.stringify(arr));
    const uid = () => 'i_' + Math.random().toString(36).slice(2) + Date.now().toString(36);

    // ç¥¨æ•°ï¼šæ¯å¤©é™ 5 ç¥¨ä¸”éœ€ä¸åŒä½œå“
    const todayKey = () => {
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      return `voteLog:${yyyy}-${mm}-${dd}`;
    };
    const loadVoteLog = () => { try { return JSON.parse(localStorage.getItem(todayKey()) || '[]'); } catch { return []; } };
    const saveVoteLog = (arr) => localStorage.setItem(todayKey(), JSON.stringify(arr));

    function canVoteFor(imageId){
      const log = loadVoteLog();
      if (log.includes(imageId)) return { ok:false, reason:'ä½ ä»Šå¤©å·²ç»ç»™è¿™å¼ å›¾æŠ•è¿‡ç¥¨å•¦' };
      if (log.length >= 5) return { ok:false, reason:'ä½ ä»Šå¤©çš„ 5 å¼ æŠ•ç¥¨é¢åº¦å·²ç”¨å®Œ' };
      return { ok:true };
    }
    function addVote(imageId){
      const images = loadImages();
      const idx = images.findIndex(x => x.id === imageId);
      if (idx === -1) return false;
      const check = canVoteFor(imageId);
      if (!check.ok) { alert(check.reason); return false; }
      images[idx].votes += 1;
      saveImages(images);
      const log = loadVoteLog();
      log.push(imageId);
      saveVoteLog(log);
      return true;
    }

    // æ¸²æŸ“ï¼šæˆ¿é—´ç”»å»Š & é¦–é¡µæ’è¡Œæ¦œ
    function renderGallery(room){
      const mount = document.getElementById(`gallery-${room}`);
      if (!mount) return;
      const images = loadImages().filter(x => x.room === room);
      mount.innerHTML = images.map(x => `
        <div class="tile" data-id="${x.id}">
          <img src="${x.dataUrl}" alt="${x.title || ''}" />
          <div class="meta">
            <div>
              <div class="title">${x.title ? escapeHtml(x.title) : 'æœªå‘½å'}</div>
              <small class="muted">${x.author ? escapeHtml(x.author) : 'åŒ¿å'} Â· ${new Date(x.createdAt).toLocaleString()}</small>
            </div>
            <div>
              <span class="votes" data-votes>â¤ï¸ ${x.votes}</span>
              <button class="vote-btn" data-vote>æŠ•ç¥¨</button>
            </div>
          </div>
        </div>
      `).join('');

      // ç»‘å®šæŠ•ç¥¨äº‹ä»¶
      mount.querySelectorAll('[data-vote]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const tile = e.currentTarget.closest('.tile');
          const id = tile?.getAttribute('data-id');
          if (!id) return;
          if (addVote(id)) {
            const span = tile.querySelector('[data-votes]');
            const images = loadImages();
            const item = images.find(x => x.id === id);
            if (span && item) span.textContent = `â¤ï¸ ${item.votes}`;
            updateLeaderboard();
          }
        });
      });
    }

    function updateLeaderboard(){
      const box = document.getElementById('top-tile');
      if (!box) return;
      const arr = loadImages();
      if (!arr.length) { box.innerHTML = '<p class="muted">è¿˜æ²¡æœ‰æŠ•ç¨¿ï¼Œå¿«å»ä¸Šä¼ ä¸€å¼ å§ï¼</p>'; return; }
      const top3 = arr.slice().sort((a,b)=> b.votes - a.votes || b.createdAt - a.createdAt).slice(0,3);
      box.innerHTML = `
        <div class="lb-grid">
          ${top3.map((x,i)=>`
            <div class="lb-item">
              <span class="badge">${i+1}</span>
              <div class="imgwrap"><img src="${x.dataUrl}" alt="${x.title || ''}"></div>
              <div class="meta">
                <div class="title">${x.title ? escapeHtml(x.title) : 'æœªå‘½å'}</div>
                <small class="muted">ç¥¨æ•°ï¼š${x.votes} Â· ${labelOf(x.room)}</small>
              </div>
            </div>`).join('')}
        </div>`;
    }

    const labelOf = (room) => ({
      genshin:'åŸç¥', starrail:'å´©åï¼šæ˜Ÿç©¹é“é“', bluearchive:'è”šè“æ¡£æ¡ˆ', huayishan:'èŠ±äº¦å±±å¿ƒä¹‹æœˆ',
      onmyoji:'é˜´é˜³å¸ˆ', honor:'ç‹è€…è£è€€', afk:'å‰‘ä¸è¿œå¾'
    })[room] || room;

    // ä¸Šä¼ ï¼šè¯»å–æ–‡ä»¶ -> å­˜å‚¨ -> é‡æ–°æ¸²æŸ“
    function wireUploads(){
      document.querySelectorAll('form.upload').forEach(form => {
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const fd = new FormData(form);
          const file = fd.get('image');
          if (!(file && file.size)) { alert('è¯·é€‰æ‹©å›¾ç‰‡'); return; }
          if (file.size > MAX_IMAGE_SIZE) { alert('å›¾ç‰‡è¿‡å¤§ï¼ˆè¯·å°äº 3MBï¼‰'); return; }
          const reader = new FileReader();
          reader.onload = () => {
            const images = loadImages();
            images.push({
              id: uid(),
              room: form.getAttribute('data-room'),
              title: (fd.get('title')||'').toString().slice(0,80),
              author: (fd.get('author')||'').toString().slice(0,40),
              dataUrl: reader.result,
              votes: 0,
              createdAt: Date.now()
            });
            saveImages(images);
            form.reset();
            renderAllGalleries();
            updateLeaderboard();
            alert('ä¸Šä¼ æˆåŠŸï¼');
          };
          reader.readAsDataURL(file);
        });
      });
    }

    function renderAllGalleries(){
      ['genshin','starrail','bluearchive','huayishan','onmyoji','honor','afk'].forEach(renderGallery);
    }

    // ç®€æ˜“è½¬ä¹‰
    function escapeHtml(s){
      return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));
    }

    // å¯åŠ¨ï¼šç»‘å®šä¸Šä¼ ã€æ¸²æŸ“ç”»å»Š & æ’è¡Œ
    wireUploads();
    renderAllGalleries();
    updateLeaderboard();

    // â€”â€” æ‰©å±•æµ‹è¯•ï¼šæŠ•ç¥¨ä¸ä¸Šä¼ ï¼ˆåœ¨ ?test=1 æ—¶è¿½åŠ æ–­è¨€ï¼‰ â€”â€”
    (function extraTests(){
      const params = new URLSearchParams(location.search);
      if (params.get('test') !== '1') return;
      (async () => {
        // æ¸…ç©ºå­˜å‚¨ï¼Œä»¥ä¾¿æµ‹è¯•å¯é‡å¤
        localStorage.removeItem(STORE_KEY);
        localStorage.removeItem(todayKey());

        // æ„é€ å››å¼ å‡å›¾ï¼ˆå« 4 ä¸ªä¸åŒæˆ¿é—´ï¼‰
        const fakeDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR4nGNgYGD4DwABBAEAH8mXwQAAAABJRU5ErkJggg==';
        const base = Date.now();
        const seed = (room, i) => ({ id: uid(), room, title:`T${i}`, author:'test', dataUrl: fakeDataUrl, votes:0, createdAt: base+i });
        const images = [seed('genshin',1), seed('starrail',2), seed('bluearchive',3), seed('huayishan',4)];
        saveImages(images);

        // T4: ä¸å¯å¯¹åŒä¸€å¼ å›¾ç‰‡åœ¨åŒä¸€å¤©æŠ•ä¸¤æ¬¡ç¥¨
        const first = addVote(images[0].id);
        const dup = addVote(images[0].id);
        console.assert(first === true && dup === false, 'T4: åŒä¸€å¼ å›¾å½“å¤©ä¸å¯é‡å¤æŠ•ç¥¨');

        // T5: æ€»ç¥¨æ•°ä¸Šé™ 5ï¼ˆä¸åŒä½œå“ï¼‰
        const ids = images.map(x=>x.id);
        const okVotes = [addVote(ids[1]), addVote(ids[2]), addVote(ids[3])];
        const fourth = addVote(ids[0]); // ç¬¬ 4 æ¬¡ï¼ˆä¸åŒä½œå“ï¼‰å¯ä»¥
        const fifth = addVote(ids[1]);  // ç¬¬ 5 æ¬¡ï¼ˆä½†é‡å¤ä½œå“ï¼Œåº”è¢«è§„åˆ™æŒ¡ä¸‹ï¼Œä¿æŒä¸åŒä½œå“ï¼‰
        console.assert(okVotes.every(v=>v===true) && fourth === true && fifth === false, 'T5: 5 ç¥¨éœ€åˆ†é…ç»™ä¸åŒä½œå“');

        // è°ƒæ•´ç¥¨æ•°ç”¨äºæ’è¡Œæ¦œé¡ºåºéªŒè¯
        const altered = loadImages();
        altered[0].votes = 10; altered[1].votes = 7; altered[2].votes = 3; altered[3].votes = 1;
        saveImages(altered);
        updateLeaderboard();

        // T6: æ’è¡Œæ¦œåº”æ˜¾ç¤º Top3 ä¸”ä¸ºæ­£æ–¹å½¢ç¼©ç•¥
        const box = document.getElementById('top-tile');
        const count = (box.querySelectorAll('.lb-item')||[]).length;
        console.assert(count === Math.min(3, loadImages().length), 'T6: æ’è¡Œæ¦œåº”æ˜¾ç¤ºå‰ 3 å¼ ');
        const hasSquares = box.querySelectorAll('.lb-item .imgwrap').length === count;
        console.assert(hasSquares, 'T6: æ’è¡Œç¼©ç•¥å›¾ä¸ºæ­£æ–¹å½¢å®¹å™¨');

        // T7: labelOf æ˜ å°„åŒ…å«æ–°å¢æˆ¿é—´
        console.assert(labelOf('honor') === 'ç‹è€…è£è€€' && labelOf('afk') === 'å‰‘ä¸è¿œå¾', 'T7: labelOf æ˜ å°„æ­£ç¡®');

        // T8: ç”»å»Šåªæ˜¾ç¤ºå¯¹åº”æˆ¿é—´ä½œå“
        const extra = seed('honor',5);
        const cur = loadImages(); cur.push(extra); saveImages(cur);
        renderGallery('honor');
        const honorCount = (document.querySelectorAll('#gallery-honor .tile')||[]).length;
        console.assert(honorCount >= 1, 'T8: æ–°å¢ä½œå“æ˜¾ç¤ºåœ¨å¯¹åº”æˆ¿é—´');

        console.log('âœ… ä¸Šä¼ /æŠ•ç¥¨/æ’è¡Œæ¦œæµ‹è¯•é€šè¿‡');
      })();
    })();

  </script>
</body>
</html>
